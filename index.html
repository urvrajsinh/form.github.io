<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="main.css">
	<title>Form Registration</title>
</head>
<body>
    <div id="form">
        
	<form onsubmit="return submitForm(event)" novalidate>
	<h1>Form Registration</h1>
		<p><label>Name:</label></p>
        <input type="text" id="name" required placeholder="Enter your name"><br>
		<p><label>Email:</label></p>
        <input type="email" id="email" required><br>
		<p><label>Password:</label></p>
        <input type="password" id="password" required><br>
		<p><label>Date of Birth:</label></p>
        <input type="date" id="dob" required><br>
		<input type="checkbox" id="terms" required>I accept the terms and conditions<br>
        <div id="button">
		<button type="submit">Submit</button>
    </div>
	</form>
</div>

    <table id="data-table">
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Password</th>
            <th>Dob</th>
            <th>Accepted terms?</th>
        </tr>
    </table>
    
    <script>
var data = [];
        function submitForm(event) {
            event.preventDefault();
            var name1 = document.getElementById("name").value;
            var email1 = document.getElementById("email").value;
            var password1 = document.getElementById("password").value;
            var dob1 = document.getElementById("dob").value;
            var terms1 = document.getElementById("terms").checked;
            
            var todays = new Date();
            var birthDates = new Date(dob);
            var age1 = todays.getFullYear() - birthDates.getFullYear();
            var a = todays.getMonth() - birthDates.getMonth();
            if (a < 0 || (a === 0 && todays.getDate() < birthDates.getDate())) {
                age--;
            }
            if (age1 < 18 || age1 > 55) {
                alert("Age must be between 18 to 55 years");
                return false;
            }
            if(name1 == null || name1 == "")
            {
                alert("Name must be filled!");
                return false;
            }
            if(password1 == null || password1 == ""){
                alert("password must be filled!");
                return false;
            }
            if (!(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email1)))
            {
                alert("You have entered an invalid email address!")
                return false;
            }
            if(!terms1){
                alert("you must check this!");
                return false;
            }

            
            data.push({
                name1: name1,
                email1: email1,
                password1: password1,
                dob1: dob1,
                terms1: terms1
            });
            localStorage.setItem("data", JSON.stringify(data));
        
            var table = document.getElementById("data-table");
            var row = table.insertRow();
            var b =row.insertCell(0);
            var c = row.insertCell(1);
            var d = row.insertCell(2);
            var e = row.insertCell(3);
            var f = row.insertCell(4);
            b.innerHTML = name1;
            c.innerHTML = email1;
            d.innerHTML = password1;
            e.innerHTML = dob1;
            f.innerHTML = terms1;
            
}
	window.onload = function() {
        
        if (localStorage.getItem("data")) {
                data = JSON.parse(localStorage.getItem("data"));
            }
		if (data) {
			var table = document.getElementById("data-table");
			for (var i = 0; i < data.length; i++) {
				var row = table.insertRow();
				var c1 = row.insertCell(0);
				var c2 = row.insertCell(1);
				var c3 = row.insertCell(2);
				var c4 = row.insertCell(3);
				var c5 = row.insertCell(4);
				c1.innerHTML = data[i].name;
				c2.innerHTML = data[i].email;
				c3.innerHTML = data[i].password;
				c4.innerHTML = data[i].dob;
				c5.innerHTML = data[i].terms;
			}
		}
	}
</script>
</body>
</html>
    